<nz-collapseset [nzBordered]="false" class="collapse-head">
  <nz-collapse [nzTitle]="'新增管理员'" nzActive="false">
    <div nz-row>
      <div nz-col [nzSpan]="6">
        <nz-input nzPlaceHolder="请填写管理员名称" spellcheck="false" [nzSize]="'large'" required #adminName="ngModel" [(ngModel)]="_addNewData.name"></nz-input>
        <div class="form-item-invalid" *ngIf="adminName.dirty&&adminName.errors">请填写管理员名称</div>
      </div>
    </div>
    <div nz-row style="margin: 16px 0;">
      <div nz-col [nzSpan]="6">
        <nz-input nzPlaceHolder="请填写密码" spellcheck="false" [nzSize]="'large'" required #adminPassword="ngModel" [(ngModel)]="_addNewData.password"></nz-input>
        <div class="form-item-invalid" *ngIf="adminPassword.dirty&&adminPassword.errors">请填写管理员登录密码</div>
      </div>
    </div>
    <div nz-row style="margin: 16px 0;">
      <div nz-col [nzSpan]="6">
        <nz-select style="width: 100%;" [(ngModel)]="_addNewData.group" [nzPlaceHolder]="'请选择管理组'">
          <nz-option *ngFor="let group of adminGroup" [nzLabel]="group.name" [nzValue]="group._id"></nz-option>
        </nz-select>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-control nz-col [nzSpan]="6">
        <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="adminName.errors||adminPassword.errors" (click)="addAdminUser()" [nzLoading]="_addItemLoading">提交</button>
      </div>
    </div>
  </nz-collapse>
</nz-collapseset>

<nz-table #nzTable [nzAjaxData]="_dataSet" nzShowTotal [nzShowSizeChanger]="true" [nzShowQuickJumper]="true" [nzLoading]="_loading"
  [nzTotal]="_total" [(nzPageSize)]="_pageSize" [(nzPageIndex)]="_current" (nzPageIndexChange)="refreshData()" [nzPageSize]="_pageSize"
  (nzPageSizeChange)="_pageSizeChange($event)">
  <thead nz-thead>
    <tr>
      <th nz-th [nzCheckbox]="true">
        <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)">
        </label>
      </th>
      <th nz-th nzWidth="5%">
        <span>序号</span>
      </th>
      <th nz-th nzWidth="10%">
        <span>用户名</span>
      </th>
      <th nz-th nzWidth="20%">
        <span>管理组</span>
      </th>
      <th nz-th nzWidth="15%">
        <span>是否禁用</span>
      </th>
      <th nz-th nzWidth="20%">
        <span>创建日期</span>
      </th>
      <th nz-th>
        <span>操作</span>
      </th>
    </tr>
  </thead>
  <tbody nz-tbody>
    <tr nz-tbody-tr *ngFor="let data of nzTable.data;let i=index">
      <td nz-td [nzCheckbox]="true">
        <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="_refreshStatus($event)">
        </label>
      </td>
      <td nz-td>{{i+1}}</td>
      <td nz-td>
        <span *ngIf="!data._editable">{{data.name}}</span>
        <nz-input [(ngModel)]="_editNewData.name" nzPlaceHolder="管理员名称" spellcheck="false" [nzSize]="'large'" *ngIf="data._editable"></nz-input>
      </td>
      <td nz-td>
        <span *ngIf="!data._editable">{{data.group.name}}</span>
        <nz-select style="width: 100%;" [(ngModel)]="_editNewData.group._id" [nzPlaceHolder]="'请选择管理组'" *ngIf="data._editable">
          <nz-option *ngFor="let group of adminGroup" [nzLabel]="group.name" [nzValue]="group._id"></nz-option>
        </nz-select>
      </td>
      <td nz-td>
        <span *ngIf="!data._editable">{{data.isBan}}</span>
        <nz-switch [(ngModel)]="_editNewData.isBan" *ngIf="data._editable"></nz-switch>
      </td>
      <td nz-td>{{data.createDate | dateFormat: 0}}</td>
      <td nz-td>
        <button nz-button [nzType]="'primary'" *ngIf="!data._editable" (click)="_editData(data.id)">
          <i class="anticon anticon-edit"></i>
          <span>修改</span>
        </button>
        <button nz-button [nzType]="'primary'" *ngIf="data._editable" [nzLoading]="_editBlogrollLoading" (click)="saveEditData()">
          <i class="anticon anticon-save"></i>
          <span>保存</span>
        </button>
        <button nz-button [nzType]="'dashed'" *ngIf="data._editable" (click)="_cancelEditData()">
          <i class="anticon anticon-close"></i>
          <span>取消</span>
        </button>
        <button nz-button [nzType]="'danger'" (click)="removeItemModal(data.id, data.name)">
          <i class="anticon anticon-delete"></i>
          <span>删除</span>
        </button>
      </td>
    </tr>
  </tbody>
</nz-table>