<nz-collapseset [nzBordered]="false" class="collapse-head">
  <nz-collapse [nzTitle]="'新增友链'" nzActive="false">
    <form nz-form [nzType]="'horizontal'" [formGroup]="addBlogrollForm">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="1">
          <label>名称</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="6">
          <nz-input formControlName="linkName" nzPlaceHolder="友链名称" [nzSize]="'large'"></nz-input>
          <div nz-form-explain *ngIf="addBlogrollForm.controls.linkName.dirty&&addBlogrollForm.controls.linkName.hasError('required')">请输入友链名称</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="1">
          <label>链接</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="6">
          <nz-input formControlName="siteLink" nzPlaceHolder="友链链接" [nzSize]="'large'"></nz-input>
          <div nz-form-explain *ngIf="addBlogrollForm.controls.siteLink.dirty&&addBlogrollForm.controls.siteLink.hasError('required')">请输入友链链接</div>
          <div nz-form-explain *ngIf="addBlogrollForm.controls.siteLink.dirty&&addBlogrollForm.controls.siteLink.hasError('pattern')">url格式不正确</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="1">
          <label>排序</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="6">
          <nz-input-number formControlName="linkOrder" [nzMin]="0" [nzStep]="1" nzSize="large"></nz-input-number>
          <div nz-form-explain *ngIf="addBlogrollForm.controls.linkOrder.dirty&&addBlogrollForm.controls.linkOrder.hasError('pattern')">必须输入自然数</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-control nz-col [nzSpan]="6">
          <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="!addBlogrollForm.valid" (click)="addBlogroll()" [nzLoading]="_addBlogrollLoading">提交</button>
        </div>
      </div>
    </form>
  </nz-collapse>
</nz-collapseset>

<div style="margin: 16px 0;">
  <button nz-button [disabled]="_disabledButton" [nzType]="'primary'" [nzLoading]="_operating" (click)="_operateData()">批量删除</button>
  <span style="margin-left: 8px;" *ngIf="_checkedNumber">已选中 {{_checkedNumber}} 个项目</span>
</div>

<nz-table #nzTable [nzDataSource]="_dataSet" nzShowTotal [nzShowSizeChanger]="true" [nzShowQuickJumper]="true" [nzLoading]="_loading"
  [nzTotal]="_total" [(nzPageSize)]="_pageSize" [(nzPageIndex)]="_current" (nzPageIndexChange)="_refreshStatus()" [nzPageSize]="_pageSize"
  (nzPageSizeChange)="_refreshStatus()">
  <thead nz-thead>
    <tr>
      <th nz-th [nzCheckbox]="true">
        <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)">
        </label>
      </th>
      <th nz-th>
        <span>序号</span>
      </th>
      <th nz-th>
        <span>名称</span>
      </th>
      <th nz-th>
        <span>链接</span>
      </th>
      <th nz-th>
        <span>排序</span>
      </th>
      <th nz-th>
        <span>操作</span>
      </th>
    </tr>
  </thead>
  <tbody nz-tbody>
    <tr nz-tbody-tr *ngFor="let data of nzTable.data;let i=index">
      <td nz-td [nzCheckbox]="true">
        <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="_refreshStatus($event)">
        </label>
      </td>
      <td nz-td>{{i+1}}</td>
      <td nz-td>
        <span *ngIf="!data._editable">{{data.name}}</span>
        <nz-input [(ngModel)]="_editNewData.name" nzPlaceHolder="链接名称" [nzSize]="'large'" *ngIf="data._editable"></nz-input>
      </td>
      <td nz-td>
        <a *ngIf="!data._editable" href="{{data.url}}" target="_blank">{{data.url}}</a>
        <nz-input [(ngModel)]="_editNewData.url" nzPlaceHolder="链接地址" [nzSize]="'large'" *ngIf="data._editable"></nz-input>
      </td>
      <td nz-td>
        <span *ngIf="!data._editable">{{data.order}}</span>
        <nz-input-number [(ngModel)]="_editNewData.order" [nzMin]="0" [nzStep]="1" nzSize="large" *ngIf="data._editable"></nz-input-number>
      </td>
      <td nz-td>
        <button nz-button [nzType]="'primary'" *ngIf="!data._editable" (click)="_editData(data.id)">
          <i class="anticon anticon-edit"></i>
          <span>修改</span>
        </button>
        <button nz-button [nzType]="'primary'" *ngIf="data._editable" [nzLoading]="_editBlogrollLoading" (click)="_saveEditData()">
          <i class="anticon anticon-save"></i>
          <span>保存</span>
        </button>
        <button nz-button [nzType]="'dashed'" *ngIf="data._editable" (click)="_cancelEditData()">
          <i class="anticon anticon-close"></i>
          <span>取消</span>
        </button>
        <button nz-button [nzType]="'danger'">
          <i class="anticon anticon-delete"></i>
          <span>删除</span>
        </button>
      </td>
    </tr>
  </tbody>
</nz-table>